<html>
  <head>
    <title>marionette.async - Marionette.js Docs</title>
    <link rel="stylesheet" href="../../styles/main.css">
  </head>
  <body>
    <div class="docs">
      <div class="docs__sidebar">
        <select>
          
            <option value="v0.1.0">v0.1.0</option>
          
            <option value="v0.10.0">v0.10.0</option>
          
            <option value="v0.10.1">v0.10.1</option>
          
            <option value="v0.10.2">v0.10.2</option>
          
            <option value="v0.2.0">v0.2.0</option>
          
            <option value="v0.2.1">v0.2.1</option>
          
            <option value="v0.2.2">v0.2.2</option>
          
            <option value="v0.2.3">v0.2.3</option>
          
            <option value="v0.2.4">v0.2.4</option>
          
            <option value="v0.2.5">v0.2.5</option>
          
            <option value="v0.2.6">v0.2.6</option>
          
            <option value="v0.3.0">v0.3.0</option>
          
            <option value="v0.3.1">v0.3.1</option>
          
            <option value="v0.4.0">v0.4.0</option>
          
            <option value="v0.4.1">v0.4.1</option>
          
            <option value="v0.4.1a">v0.4.1a</option>
          
            <option value="v0.4.2">v0.4.2</option>
          
            <option value="v0.4.3">v0.4.3</option>
          
            <option value="v0.4.4">v0.4.4</option>
          
            <option value="v0.4.5">v0.4.5</option>
          
            <option value="v0.4.6">v0.4.6</option>
          
            <option value="v0.4.7">v0.4.7</option>
          
            <option value="v0.4.8">v0.4.8</option>
          
            <option value="v0.5.0">v0.5.0</option>
          
            <option value="v0.5.1">v0.5.1</option>
          
            <option value="v0.5.2">v0.5.2</option>
          
            <option value="v0.6.0">v0.6.0</option>
          
            <option value="v0.6.1">v0.6.1</option>
          
            <option value="v0.6.2">v0.6.2</option>
          
            <option value="v0.6.3">v0.6.3</option>
          
            <option value="v0.7.0">v0.7.0</option>
          
            <option value="v0.7.1">v0.7.1</option>
          
            <option value="v0.7.2">v0.7.2</option>
          
            <option value="v0.7.3">v0.7.3</option>
          
            <option value="v0.7.4">v0.7.4</option>
          
            <option value="v0.7.5">v0.7.5</option>
          
            <option value="v0.7.6">v0.7.6</option>
          
            <option value="v0.8.0">v0.8.0</option>
          
            <option value="v0.8.1">v0.8.1</option>
          
            <option value="v0.8.2">v0.8.2</option>
          
            <option value="v0.8.3">v0.8.3</option>
          
            <option value="v0.8.4">v0.8.4</option>
          
            <option value="v0.9.0">v0.9.0</option>
          
            <option value="v0.9.1">v0.9.1</option>
          
            <option value="v0.9.10">v0.9.10</option>
          
            <option value="v0.9.11">v0.9.11</option>
          
            <option value="v0.9.12">v0.9.12</option>
          
            <option value="v0.9.13">v0.9.13</option>
          
            <option value="v0.9.2">v0.9.2</option>
          
            <option value="v0.9.3">v0.9.3</option>
          
            <option value="v0.9.4">v0.9.4</option>
          
            <option value="v0.9.5">v0.9.5</option>
          
            <option value="v0.9.6">v0.9.6</option>
          
            <option value="v0.9.7">v0.9.7</option>
          
            <option value="v0.9.8">v0.9.8</option>
          
            <option value="v0.9.9">v0.9.9</option>
          
            <option value="v1.0.0">v1.0.0</option>
          
            <option value="v1.0.0-beta1">v1.0.0-beta1</option>
          
            <option value="v1.0.0-beta2">v1.0.0-beta2</option>
          
            <option value="v1.0.0-beta3">v1.0.0-beta3</option>
          
            <option value="v1.0.0-beta4">v1.0.0-beta4</option>
          
            <option value="v1.0.0-beta5">v1.0.0-beta5</option>
          
            <option value="v1.0.0-beta6">v1.0.0-beta6</option>
          
            <option value="v1.0.0-rc1">v1.0.0-rc1</option>
          
            <option value="v1.0.0-rc2">v1.0.0-rc2</option>
          
            <option value="v1.0.0-rc3">v1.0.0-rc3</option>
          
            <option value="v1.0.0-rc4">v1.0.0-rc4</option>
          
            <option value="v1.0.0-rc5">v1.0.0-rc5</option>
          
            <option value="v1.0.0-rc6">v1.0.0-rc6</option>
          
            <option value="v1.0.1">v1.0.1</option>
          
            <option value="v1.0.2">v1.0.2</option>
          
            <option value="v1.0.3">v1.0.3</option>
          
            <option value="v1.0.4">v1.0.4</option>
          
            <option value="v1.1.0">v1.1.0</option>
          
            <option value="v1.2.0">v1.2.0</option>
          
            <option value="v1.2.1">v1.2.1</option>
          
            <option value="v1.2.2">v1.2.2</option>
          
            <option value="v1.2.3">v1.2.3</option>
          
            <option value="v1.3.0">v1.3.0</option>
          
            <option value="v1.4.0">v1.4.0</option>
          
            <option value="v1.4.0beta">v1.4.0beta</option>
          
            <option value="v1.4.1">v1.4.1</option>
          
            <option value="v1.5.0">v1.5.0</option>
          
            <option value="v1.5.1">v1.5.1</option>
          
            <option value="v1.6.0">v1.6.0</option>
          
            <option value="v1.6.1">v1.6.1</option>
          
            <option value="v1.6.2">v1.6.2</option>
          
            <option value="v1.6.3">v1.6.3</option>
          
            <option value="v1.6.4">v1.6.4</option>
          
            <option value="v1.7">v1.7</option>
          
            <option value="v1.7.1">v1.7.1</option>
          
            <option value="v1.7.2">v1.7.2</option>
          
            <option value="v1.7.3">v1.7.3</option>
          
            <option value="v1.7.4">v1.7.4</option>
          
            <option value="v1.8.0">v1.8.0</option>
          
            <option value="v1.8.1">v1.8.1</option>
          
            <option value="v1.8.2">v1.8.2</option>
          
            <option value="v1.8.3">v1.8.3</option>
          
            <option value="v1.8.4">v1.8.4</option>
          
            <option value="v1.8.5">v1.8.5</option>
          
            <option value="v1.8.6">v1.8.6</option>
          
            <option value="v1.8.7">v1.8.7</option>
          
            <option value="v1.8.8">v1.8.8</option>
          
            <option value="v2.0.0">v2.0.0</option>
          
            <option value="v2.0.0-pre.1">v2.0.0-pre.1</option>
          
            <option value="v2.0.0-pre.2">v2.0.0-pre.2</option>
          
            <option value="v2.0.1">v2.0.1</option>
          
            <option value="v2.0.2">v2.0.2</option>
          
            <option value="v2.0.3">v2.0.3</option>
          
            <option value="v2.1.0">v2.1.0</option>
          
            <option value="v2.1.0-pre">v2.1.0-pre</option>
          
            <option value="v2.2.0">v2.2.0</option>
          
            <option value="v2.2.0-pre">v2.2.0-pre</option>
          
            <option value="v2.2.0-pre.2">v2.2.0-pre.2</option>
          
            <option value="v2.2.1">v2.2.1</option>
          
        </select>
        <nav>
          
            <a href="marionette.application.html">marionette.application</a>
          
            <a href="marionette.application.module.html">marionette.application.module</a>
          
            <a href="marionette.approuter.html">marionette.approuter</a>
          
            <a href="marionette.async.html">marionette.async</a>
          
            <a href="marionette.callbacks.html">marionette.callbacks</a>
          
            <a href="marionette.collectionview.html">marionette.collectionview</a>
          
            <a href="marionette.compositeview.html">marionette.compositeview</a>
          
            <a href="marionette.eventaggregator.html">marionette.eventaggregator</a>
          
            <a href="marionette.eventbinder.html">marionette.eventbinder</a>
          
            <a href="marionette.itemview.html">marionette.itemview</a>
          
            <a href="marionette.layout.html">marionette.layout</a>
          
            <a href="marionette.region.html">marionette.region</a>
          
            <a href="marionette.renderer.html">marionette.renderer</a>
          
            <a href="marionette.templatecache.html">marionette.templatecache</a>
          
            <a href="marionette.view.html">marionette.view</a>
          
        </nav>
      </div>
      <div class="docs__content">
        <pre>{
  &quot;tag&quot;: &quot;v0.9.7&quot;,
  &quot;basename&quot;: &quot;marionette.async&quot;,
  &quot;filenane&quot;: &quot;marionette.async.md&quot;,
  &quot;pathname&quot;: &quot;/Users/sam/Desktop/repos/marionettejs.com/.grunt/compileDocs/1412653309300/v0.9.7&quot;,
  &quot;contents&quot;: &quot;&lt;h1&gt;&lt;a name=\&quot;marionette-async\&quot; class=\&quot;anchor\&quot; href=\&quot;#marionette-async\&quot;&gt;&lt;span class=\&quot;header-link\&quot;&gt;&lt;/span&gt;&lt;/a&gt;Marionette.Async&lt;/h1&gt;&lt;p&gt;Add async / deferred rendering and template loading to Backbone.Marionette&lt;/p&gt;\n&lt;h2&gt;&lt;a name=\&quot;download\&quot; class=\&quot;anchor\&quot; href=\&quot;#download\&quot;&gt;&lt;span class=\&quot;header-link\&quot;&gt;&lt;/span&gt;&lt;/a&gt;Download&lt;/h2&gt;&lt;p&gt;To add support for asynchronously loading templates and rendering views, \nyou need to download and include one of the following &lt;code&gt;marionette.async&lt;/code&gt;\nbuilds in your project:&lt;/p&gt;\n&lt;p&gt;Development: &lt;a href=\&quot;https://raw.github.com/derickbailey/backbone.marionette/master/lib/backbone.marionette.async.js\&quot;&gt;backbone.marionette.async.js&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;Production: &lt;a href=\&quot;https://raw.github.com/derickbailey/backbone.marionette/master/lib/backbone.marionette.async.min.js\&quot;&gt;backbone.marionette.async.min.js&lt;/a&gt;&lt;/p&gt;\n&lt;h2&gt;&lt;a name=\&quot;amd-requirejs-support\&quot; class=\&quot;anchor\&quot; href=\&quot;#amd-requirejs-support\&quot;&gt;&lt;span class=\&quot;header-link\&quot;&gt;&lt;/span&gt;&lt;/a&gt;AMD/RequireJS Support&lt;/h2&gt;&lt;p&gt;Note that there is no AMD/RequireJS build for Marionette.Async. \nAMD/RequireJS are asynchronous by definition: &lt;strong&gt;A&lt;/strong&gt;synchronous \n&lt;strong&gt;M&lt;/strong&gt;odule &lt;strong&gt;D&lt;/strong&gt;efinition. Providing an AMD/RequireJS version of \nMarionette.Async would be redundant.&lt;/p&gt;\n&lt;h2&gt;&lt;a name=\&quot;basic-usage\&quot; class=\&quot;anchor\&quot; href=\&quot;#basic-usage\&quot;&gt;&lt;span class=\&quot;header-link\&quot;&gt;&lt;/span&gt;&lt;/a&gt;Basic Usage&lt;/h2&gt;&lt;p&gt;To use Marionette.Async, you must include one of the above downloads in\nyour project, after Marionette has been included:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&quot;lang-html\&quot;&gt;&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt; &lt;span class=\&quot;hljs-attribute\&quot;&gt;src&lt;/span&gt;=&lt;span class=\&quot;hljs-value\&quot;&gt;\&quot;/js/underscore.js\&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=\&quot;javascript\&quot;&gt;&lt;/span&gt;&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;/&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt; &lt;span class=\&quot;hljs-attribute\&quot;&gt;src&lt;/span&gt;=&lt;span class=\&quot;hljs-value\&quot;&gt;\&quot;/js/jquery.js\&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=\&quot;javascript\&quot;&gt;&lt;/span&gt;&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;/&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt; &lt;span class=\&quot;hljs-attribute\&quot;&gt;src&lt;/span&gt;=&lt;span class=\&quot;hljs-value\&quot;&gt;\&quot;/js/json2.js\&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=\&quot;javascript\&quot;&gt;&lt;/span&gt;&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;/&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt; &lt;span class=\&quot;hljs-attribute\&quot;&gt;src&lt;/span&gt;=&lt;span class=\&quot;hljs-value\&quot;&gt;\&quot;/js/backbone.js\&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=\&quot;javascript\&quot;&gt;&lt;/span&gt;&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;/&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt; &lt;span class=\&quot;hljs-attribute\&quot;&gt;src&lt;/span&gt;=&lt;span class=\&quot;hljs-value\&quot;&gt;\&quot;/js/backbone.marionette.js\&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=\&quot;javascript\&quot;&gt;&lt;/span&gt;&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;/&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt; &lt;span class=\&quot;hljs-attribute\&quot;&gt;src&lt;/span&gt;=&lt;span class=\&quot;hljs-value\&quot;&gt;\&quot;/js/backbone.marionette.async.js\&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=\&quot;javascript\&quot;&gt;&lt;/span&gt;&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;/&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Once that has been included, several core functions on several of the\nMarionette objects will be overwritten with asynchronous counterparts.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Note that this is destructive change.&lt;/strong&gt; You cannot switch\nback and forth between sync/async objects. Once included in the page, all\nof the specified methods will run with async capabilities.&lt;/p&gt;\n&lt;h2&gt;&lt;a name=\&quot;marionette-async-region\&quot; class=\&quot;anchor\&quot; href=\&quot;#marionette-async-region\&quot;&gt;&lt;span class=\&quot;header-link\&quot;&gt;&lt;/span&gt;&lt;/a&gt;Marionette.Async.Region&lt;/h2&gt;&lt;p&gt;The region manager &lt;code&gt;show&lt;/code&gt; method takes advantage of jQuery&amp;#39;s\ndeferred cababilities, allowing for some very advanced techniques\nto be used for rendering views.&lt;/p&gt;\n&lt;p&gt;To use a deferred, a view that is shown via a region manager\nmust return a jQuery deferred object from the &lt;code&gt;render&lt;/code&gt; method:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&quot;lang-js\&quot;&gt;DeferredView = Backbone.View.extend({\n  render: &lt;span class=\&quot;hljs-function\&quot;&gt;&lt;span class=\&quot;hljs-keyword\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;hljs-params\&quot;&gt;()&lt;/span&gt;&lt;/span&gt;{\n    &lt;span class=\&quot;hljs-keyword\&quot;&gt;var&lt;/span&gt; that = &lt;span class=\&quot;hljs-keyword\&quot;&gt;this&lt;/span&gt;;\n    &lt;span class=\&quot;hljs-keyword\&quot;&gt;var&lt;/span&gt; data = &lt;span class=\&quot;hljs-keyword\&quot;&gt;this&lt;/span&gt;.serializeData();\n    &lt;span class=\&quot;hljs-keyword\&quot;&gt;var&lt;/span&gt; dfd = jQuery.Deferred();\n\n    &lt;span class=\&quot;hljs-keyword\&quot;&gt;this&lt;/span&gt;.getTemplate(&lt;span class=\&quot;hljs-function\&quot;&gt;&lt;span class=\&quot;hljs-keyword\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;hljs-params\&quot;&gt;(template)&lt;/span&gt;&lt;/span&gt;{\n      &lt;span class=\&quot;hljs-keyword\&quot;&gt;var&lt;/span&gt; html = that.renderTemplate(template, data);\n\n      that.$el.html(html);\n\n      &lt;span class=\&quot;hljs-keyword\&quot;&gt;if&lt;/span&gt; (that.onRender){\n        that.onRender();\n      }\n\n      dfd.resolve();\n    });\n\n    &lt;span class=\&quot;hljs-keyword\&quot;&gt;return&lt;/span&gt; dfd.promise();\n  }\n});\n\n&lt;span class=\&quot;hljs-keyword\&quot;&gt;var&lt;/span&gt; view = &lt;span class=\&quot;hljs-keyword\&quot;&gt;new&lt;/span&gt; DeferredView();\nMyApp.mainRegion.show(view);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The region manager will wait until the deferred object is resolved\nbefore it attached the view&amp;#39;s &lt;code&gt;el&lt;/code&gt; to the DOM and displays it.&lt;/p&gt;\n&lt;h2&gt;&lt;a name=\&quot;marionette-async-itemview\&quot; class=\&quot;anchor\&quot; href=\&quot;#marionette-async-itemview\&quot;&gt;&lt;span class=\&quot;header-link\&quot;&gt;&lt;/span&gt;&lt;/a&gt;Marionette.Async.ItemView&lt;/h2&gt;&lt;p&gt;The &lt;code&gt;render&lt;/code&gt; method returns a jQuery deferred object, allowing\nyou to know when the rendering completes. &lt;/p&gt;\n&lt;h2&gt;&lt;a name=\&quot;marionette-async-collectionview\&quot; class=\&quot;anchor\&quot; href=\&quot;#marionette-async-collectionview\&quot;&gt;&lt;span class=\&quot;header-link\&quot;&gt;&lt;/span&gt;&lt;/a&gt;Marionette.Async.CollectionView&lt;/h2&gt;&lt;p&gt;The &lt;code&gt;render&lt;/code&gt; method returns a jQuery deferred object, allowing\nyou to know when the rendering completes. This deferred object\nis resolved after all of the child views have been rendered.&lt;/p&gt;\n&lt;h2&gt;&lt;a name=\&quot;marionette-async-compositeview\&quot; class=\&quot;anchor\&quot; href=\&quot;#marionette-async-compositeview\&quot;&gt;&lt;span class=\&quot;header-link\&quot;&gt;&lt;/span&gt;&lt;/a&gt;Marionette.Async.CompositeView&lt;/h2&gt;&lt;p&gt;A composite view returns a jQuery deferred object from the\n&lt;code&gt;render&lt;/code&gt; method. This allows you to know when the rendering for\nthe entire composite structure has been completed.&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&quot;lang-js\&quot;&gt;MyComp = Backbone.Marionette.CompositeView.extend({...});\n\nmyComp = &lt;span class=\&quot;hljs-keyword\&quot;&gt;new&lt;/span&gt; MyComp().render().done(&lt;span class=\&quot;hljs-function\&quot;&gt;&lt;span class=\&quot;hljs-keyword\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;hljs-params\&quot;&gt;()&lt;/span&gt;&lt;/span&gt;{\n  &lt;span class=\&quot;hljs-comment\&quot;&gt;// the entire composite is now rendered. do stuff here&lt;/span&gt;\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;&lt;a name=\&quot;marionette-async-templatecache\&quot; class=\&quot;anchor\&quot; href=\&quot;#marionette-async-templatecache\&quot;&gt;&lt;span class=\&quot;header-link\&quot;&gt;&lt;/span&gt;&lt;/a&gt;Marionette.Async.TemplateCache&lt;/h2&gt;&lt;p&gt;The default template retrieval is to select the template contents\nfrom the DOM using jQuery. If you wish to change the way this\nworks, you can override the &lt;code&gt;loadTemplate&lt;/code&gt; method on the\n&lt;code&gt;TemplateCache&lt;/code&gt; object.&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&quot;lang-js\&quot;&gt;Backbone.Marionette.TemplateCache.prototype.loadTemplate = &lt;span class=\&quot;hljs-function\&quot;&gt;&lt;span class=\&quot;hljs-keyword\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;hljs-params\&quot;&gt;(templateId, callback)&lt;/span&gt;&lt;/span&gt;{\n  &lt;span class=\&quot;hljs-comment\&quot;&gt;// load your template here, returning it or a deferred&lt;/span&gt;\n  &lt;span class=\&quot;hljs-comment\&quot;&gt;// object that resolves with the template as the only param&lt;/span&gt;\n  &lt;span class=\&quot;hljs-keyword\&quot;&gt;var&lt;/span&gt; myTemplate = ...;\n\n  &lt;span class=\&quot;hljs-comment\&quot;&gt;// send the template back&lt;/span&gt;\n  callback(myTemplate);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;For example, if you want to load templates asychronously from the\nserver, instead of from the DOM, you could replace \n&lt;code&gt;loadTemplate&lt;/code&gt; function.&lt;/p&gt;\n&lt;p&gt;If a &amp;quot;template.html&amp;quot; file exists on the server, with this in it:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&quot;lang-html\&quot;&gt;&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt; &lt;span class=\&quot;hljs-attribute\&quot;&gt;id&lt;/span&gt;=&lt;span class=\&quot;hljs-value\&quot;&gt;\&quot;my-template\&quot;&lt;/span&gt; &lt;span class=\&quot;hljs-attribute\&quot;&gt;type&lt;/span&gt;=&lt;span class=\&quot;hljs-value\&quot;&gt;\&quot;text/template\&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=\&quot;javascript\&quot;&gt;\n  &amp;lt;div&amp;gt;some template stuff&amp;lt;&lt;span class=\&quot;hljs-regexp\&quot;&gt;/div&amp;gt;\n&lt;/span&gt;&lt;/span&gt;&lt;span class=\&quot;hljs-tag\&quot;&gt;&amp;lt;/&lt;span class=\&quot;hljs-title\&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Then the &lt;code&gt;loadTemplate&lt;/code&gt; implementation may look like this:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&quot;lang-js\&quot;&gt;Backbone.Marionette.TemplateCache.loadTemplate = &lt;span class=\&quot;hljs-function\&quot;&gt;&lt;span class=\&quot;hljs-keyword\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;hljs-params\&quot;&gt;(templateId, callback)&lt;/span&gt;&lt;/span&gt;{\n  &lt;span class=\&quot;hljs-keyword\&quot;&gt;var&lt;/span&gt; that = &lt;span class=\&quot;hljs-keyword\&quot;&gt;this&lt;/span&gt;;\n  &lt;span class=\&quot;hljs-keyword\&quot;&gt;var&lt;/span&gt; url = templateId + &lt;span class=\&quot;hljs-string\&quot;&gt;\&quot;.html\&quot;&lt;/span&gt;;\n\n  $.get(url, &lt;span class=\&quot;hljs-function\&quot;&gt;&lt;span class=\&quot;hljs-keyword\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;hljs-params\&quot;&gt;(templateHtml)&lt;/span&gt;&lt;/span&gt;{\n    &lt;span class=\&quot;hljs-keyword\&quot;&gt;var&lt;/span&gt; template = $(templateHtml).find(templateId);\n    callback(template);\n  });\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This will use jQuery to asynchronously retrieve the template from\nthe server. When the &lt;code&gt;get&lt;/code&gt; completes, the callback function will\nselect the template from the resulting HTML and then call the\n&lt;code&gt;callback&lt;/code&gt; function to send it in to the template cache and allow\nit to be used for rendering.&lt;/p&gt;\n&quot;
}</pre>
        <h1><a name="marionette-async" class="anchor" href="#marionette-async"><span class="header-link"></span></a>Marionette.Async</h1><p>Add async / deferred rendering and template loading to Backbone.Marionette</p>
<h2><a name="download" class="anchor" href="#download"><span class="header-link"></span></a>Download</h2><p>To add support for asynchronously loading templates and rendering views, 
you need to download and include one of the following <code>marionette.async</code>
builds in your project:</p>
<p>Development: <a href="https://raw.github.com/derickbailey/backbone.marionette/master/lib/backbone.marionette.async.js">backbone.marionette.async.js</a></p>
<p>Production: <a href="https://raw.github.com/derickbailey/backbone.marionette/master/lib/backbone.marionette.async.min.js">backbone.marionette.async.min.js</a></p>
<h2><a name="amd-requirejs-support" class="anchor" href="#amd-requirejs-support"><span class="header-link"></span></a>AMD/RequireJS Support</h2><p>Note that there is no AMD/RequireJS build for Marionette.Async. 
AMD/RequireJS are asynchronous by definition: <strong>A</strong>synchronous 
<strong>M</strong>odule <strong>D</strong>efinition. Providing an AMD/RequireJS version of 
Marionette.Async would be redundant.</p>
<h2><a name="basic-usage" class="anchor" href="#basic-usage"><span class="header-link"></span></a>Basic Usage</h2><p>To use Marionette.Async, you must include one of the above downloads in
your project, after Marionette has been included:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/underscore.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/jquery.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/json2.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/backbone.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/backbone.marionette.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/backbone.marionette.async.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>Once that has been included, several core functions on several of the
Marionette objects will be overwritten with asynchronous counterparts.</p>
<p><strong>Note that this is destructive change.</strong> You cannot switch
back and forth between sync/async objects. Once included in the page, all
of the specified methods will run with async capabilities.</p>
<h2><a name="marionette-async-region" class="anchor" href="#marionette-async-region"><span class="header-link"></span></a>Marionette.Async.Region</h2><p>The region manager <code>show</code> method takes advantage of jQuery&#39;s
deferred cababilities, allowing for some very advanced techniques
to be used for rendering views.</p>
<p>To use a deferred, a view that is shown via a region manager
must return a jQuery deferred object from the <code>render</code> method:</p>
<pre><code class="lang-js">DeferredView = Backbone.View.extend({
  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">this</span>.serializeData();
    <span class="hljs-keyword">var</span> dfd = jQuery.Deferred();

    <span class="hljs-keyword">this</span>.getTemplate(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(template)</span></span>{
      <span class="hljs-keyword">var</span> html = that.renderTemplate(template, data);

      that.$el.html(html);

      <span class="hljs-keyword">if</span> (that.onRender){
        that.onRender();
      }

      dfd.resolve();
    });

    <span class="hljs-keyword">return</span> dfd.promise();
  }
});

<span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> DeferredView();
MyApp.mainRegion.show(view);
</code></pre>
<p>The region manager will wait until the deferred object is resolved
before it attached the view&#39;s <code>el</code> to the DOM and displays it.</p>
<h2><a name="marionette-async-itemview" class="anchor" href="#marionette-async-itemview"><span class="header-link"></span></a>Marionette.Async.ItemView</h2><p>The <code>render</code> method returns a jQuery deferred object, allowing
you to know when the rendering completes. </p>
<h2><a name="marionette-async-collectionview" class="anchor" href="#marionette-async-collectionview"><span class="header-link"></span></a>Marionette.Async.CollectionView</h2><p>The <code>render</code> method returns a jQuery deferred object, allowing
you to know when the rendering completes. This deferred object
is resolved after all of the child views have been rendered.</p>
<h2><a name="marionette-async-compositeview" class="anchor" href="#marionette-async-compositeview"><span class="header-link"></span></a>Marionette.Async.CompositeView</h2><p>A composite view returns a jQuery deferred object from the
<code>render</code> method. This allows you to know when the rendering for
the entire composite structure has been completed.</p>
<pre><code class="lang-js">MyComp = Backbone.Marionette.CompositeView.extend({...});

myComp = <span class="hljs-keyword">new</span> MyComp().render().done(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
  <span class="hljs-comment">// the entire composite is now rendered. do stuff here</span>
});
</code></pre>
<h2><a name="marionette-async-templatecache" class="anchor" href="#marionette-async-templatecache"><span class="header-link"></span></a>Marionette.Async.TemplateCache</h2><p>The default template retrieval is to select the template contents
from the DOM using jQuery. If you wish to change the way this
works, you can override the <code>loadTemplate</code> method on the
<code>TemplateCache</code> object.</p>
<pre><code class="lang-js">Backbone.Marionette.TemplateCache.prototype.loadTemplate = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(templateId, callback)</span></span>{
  <span class="hljs-comment">// load your template here, returning it or a deferred</span>
  <span class="hljs-comment">// object that resolves with the template as the only param</span>
  <span class="hljs-keyword">var</span> myTemplate = ...;

  <span class="hljs-comment">// send the template back</span>
  callback(myTemplate);
}
</code></pre>
<p>For example, if you want to load templates asychronously from the
server, instead of from the DOM, you could replace 
<code>loadTemplate</code> function.</p>
<p>If a &quot;template.html&quot; file exists on the server, with this in it:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"my-template"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/template"</span>&gt;</span><span class="javascript">
  &lt;div&gt;some template stuff&lt;<span class="hljs-regexp">/div&gt;
</span></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>Then the <code>loadTemplate</code> implementation may look like this:</p>
<pre><code class="lang-js">Backbone.Marionette.TemplateCache.loadTemplate = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(templateId, callback)</span></span>{
  <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
  <span class="hljs-keyword">var</span> url = templateId + <span class="hljs-string">".html"</span>;

  $.get(url, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(templateHtml)</span></span>{
    <span class="hljs-keyword">var</span> template = $(templateHtml).find(templateId);
    callback(template);
  });
}
</code></pre>
<p>This will use jQuery to asynchronously retrieve the template from
the server. When the <code>get</code> completes, the callback function will
select the template from the resulting HTML and then call the
<code>callback</code> function to send it in to the template cache and allow
it to be used for rendering.</p>

      </div>
    </div>
  </body>
</html>
